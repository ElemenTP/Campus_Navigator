# 产品需求分析报告

## 开发目标

开发出一款校园导览系统，该系统具备导航功能，当某一用户在某一时刻请求导航时，校园导航系统要根据同学的具体需求为其设计出一条路线，同时，导览系统还要提供查询服务，可以为用户实时提供其当前所在地点，周围的教学楼，宿舍楼，餐饮，后勤服务，操场等信息。

***

## 产品背景与开发意义

### 产品来源

产品来源于北京邮电大学数据结构课程设计课的课程学习，用以锻炼学生结合书本知识解决实际问题的能力。

### 开发意义

本产品有别于市场上主要的导航产品，该产品具有高度定制化的特性，其主要面向的用户为校园内的学生、教职工、校园参观人员等。导航系统不单单为用户提供具体地理地点的导航服务，同时，还能根据用户的具体需求智能导航到相应的地点。如：寻找特定考试的监考地点；寻找低人流的食堂；规划特定的校园游览路线等，有效地解决了校园用户的痛点。除此以外，由于背靠校园，该产品也比现有的导航产品能够拥有更多也更完善的校园信息，同时，信息的更新迭代也更为迅速。能为在校学生以及老师等人群提供更好的服务。

***

## 产品面向人群

### 使用用户

产品的使用用户主要是学生，教职工等，主要是为其提供导航服务，根据其具体的需求提供跨校区的导航。

### 开发者

各个学校的开发者可以使用我们提供的工具，向我们的产品导入相应的地图数据和相关的逻辑导航数据以后，可以将该产品自定义化为特定学校的导航系统。

***

## 运行环境及开发环境

### 运行环境

Android 手机系统

### 开发环境

1. 开发人员主要在window10操作系统下，使用VScode软件进行代码的编写
2. 软件系统主要使用Dart语言进行编写
3. 通过软件平台flutter进行搭建
4. 通过json文件存出相关的地图数据信息
5. 使用git软件通过github进行版本控制

***

### 产品局限

1. 产品理论上只提供校园内的导航服务，不提供校园外的地图信息。如果用户希望从一个校区转移到另一个校区的话，本导航系统只会根据已有的地图数据提供时间较短的交通方案，离开校园后的具体导航还需用户自行解决。
2. 产品的地图实现，导航路线图形化显示都依赖于高德地图api。使用原因：开发人员主要是在校大学生，缺乏相关功能的实现能力。

***

## 产品外部接口

（张金毅）

***

## 用户界面

（详细信息见附录）

***

## 系统功能需求

### 地图显示

地图显示是本导航系统的基础，主要用于显示用户当前位置信息，导航路线的显示，周边建筑物的显示。

地图的图形化显示使用高德openapi实现，其主要功能是在于当app启动的时候，在用户的使用主页面上显示出用户当前位置及周围的地图。具体展现形式可以参考高德地图，百度地图等主流导航app的展现形式。

### 导航

导航功能是本系统的核心功能，导航系统应该可以根据用户的输入的起点、终点和导航策略自动为用户规划出符合需求的路径。当导航系统计算出符合用户需求的路线了之后应该在地图上显示出来，起到指引用户的作用，并且当用户的位置发生变化时，导航显示的路线也应该实时发生变化，且在用户偏离指引道路之后，能够实时调整继续为用户指引新的道路。

**以下是要注意的核心要点**

1. 起点和终点要包括物理地址，（如1号教学楼，2号宿舍等）还要包括逻辑位置（如2019211311班-数据结构课考场，“大创双选会举办地点”）。逻辑位置可以与物理位置一对一，也可以一对多（如食堂可以代表“学生食堂”或者“教师食堂”）。物理地址与逻辑地址的联系可以用做数据表的方法来完成， 但是，要保证这个数据表能够方便修改和更新，并且保留有面向用户的修改方式，使得使用者也能够较为方便地修改该数据表。
2. 起点和终点可以在不同的校区，需要考虑到跨校区时使用的交通方式。校区间的交通方式默认有两种：定点班车和公共汽车。对于跨校区的导航，可以通过分段导航的方法进行解决，当导航系统经过数据处理得知用户 要进行一次跨跨校区的导航时，应该先判断出用户这时更适合坐定点班车还是其他交通工具，然后先将用户导航至当前校区乘坐交通工具的地点，然后当用户到达另一个校区后，在从用户的下车点导航到用户最终需要到达的目的地。例如：a同学要从沙河校区图书馆去西土城校区的科研楼，就可以先确定a同学此时是否可以坐校车前往西土城校区（通过班车时刻表判断），假如可以，就先将a同学导航的班车上车等候处。然后等到a同学到达西土城校区后，再从他的下车点重新导航到科研楼。
3. 结合1和2两个要点，可以看到，对于起点，系统应该能够做到用户既可以选择确定的校园内建筑物，也能够选择自己当前所在的位置。
4. 导航应该是实时的，而不是经过一次计算后，系统就进入等待状态，等待下一次导航事件的到来。导航系统应该实时关注本次导航事件，并且每隔一定的时间就要重新获取一次用户的位置信息，当用户偏离原定路线了之后，要能够及时做出反应，重新为用户规划全新的路线。
5. 结合要点3和4用户在行走的途中应该可以更爱目标和导航的策略，系统应该按照当前的位置给出新的指引路线。
6. 导航策略应该实现以下几种导航策略
   
   <br/>

> **<u>最短距离策略</u>：找出起点和终点之间最短的路径即可**
> 
> **<u>最短时间策略</u>：假设每条道路的拥挤度不一样，拥挤度的大小会影响用户的移动速度，在这样的前提下，寻找出一条用户所画时间最少的道路。具体实现实现时可以进行一定的转换设计，如某条道路的拥挤度使得用户在这条道路上的移动速度会减半，可以等效理解为用户的移动速度没有发生改变，而是道路的长度变为了原来的两倍。**
> 
> **（注：道路拥挤度在debug时期以及演示阶段可以使用随机算法先给每条道路随机生成，但是，应该留下对外接口，使得正常使用时可以从对应的服务器中获得实时的道路拥挤度）**
> 
> **<u>途径最短距离策略</u>：途径某些地点的最短距离，这些地点没有先后顺序之分，要寻找出一条经过所有这些地点的最短路径。**

### 搜索查询功能

搜索功能是导航系统中的一个重要功能，它和导航功能相辅相成。他应该能够完成以下两个任务

1. 对校园内的所有建筑物进行关键词搜索，搜索结果可以作为数据输入给导航模块。搜索模块应该能够根据校区的不同为用户提供筛选的服务，同时，用户不仅仅可以搜索真实的地理位置，同时也应该可以可以搜索逻辑位置（如某个考试的考场），以此来实现根据用户的具体需求进行导航。
2. 除了关键词搜索功能以外，还应该提供基于位置信息的搜索查询功能，当用户要求查询自己自己当前位置周围的建筑物和服务设施时，导航系统应该可以根据用户当前的位置信息反馈给用户相应的信息。

### 日志功能

导航系统应该生成一份日志文件，其中应该包含时间与事件信息。日志文件应该在app中设置相应的接口，使得用户可以方便地查看，同时也方便开发人员进行debug

日志内容示例：

某某时间，用户执行了某某操作（张金毅）